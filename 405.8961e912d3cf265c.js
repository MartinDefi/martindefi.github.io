"use strict";(self.webpackChunkapp_titi_frontend=self.webpackChunkapp_titi_frontend||[]).push([[405],{28321:(S,T,a)=>{function w(){const e=(new Date).getTime(),t=[];let r=36e5*parseInt(e/36e5+"");for(let s=0;s<720;s++)t.push(r),r-=36e5;return t}function f(){const e=(new Date).getTime(),t=[];let r=864e5*parseInt(e/864e5+"");for(let s=0;s<30;s++)t.push(r),r-=864e5;return t}function n(){const e=(new Date).getTime();return 86400*parseInt(e/864e5+"")-2592e3}function u(i){return i>0?[parseInt(i/864e5+"")+"d",parseInt(i%864e5/36e5+"")+"h",parseInt(i%36e5/6e4+"")+"m"].join(":"):[" -- d"," -- h"," -- m"].join(":")}function p(i){return i>0?[parseInt(i/864e5+"")+"d",parseInt(i%864e5/36e5+"")+"h",parseInt(i%36e5/6e4+"")+"m",parseInt(i%6e4/1e3+"")+"s"].join(":"):[" -- d"," -- h"," -- m"," -- s"].join(":")}function D(i){let e=i;const t=e.substring(0,1),r=e.substring(1,2);if(e.length>1&&"0"===t&&"."!==r&&(e=e.substring(1,2)),"."===t&&(e=""),-1!==e.indexOf(".")){let s=e.substring(e.indexOf(".")+1);-1!==s.indexOf(".")&&(e=e.substring(0,e.indexOf(".")+s.indexOf(".")+1))}return e=e.replace(/[^\d^\.]+/g,""),e}function v(i){let e=D(i);return-1===e.indexOf(".")&&(e+=".0000"),e=e.replace(/^(\-)*(\d+)\.(\d\d\d\d).*$/,"$1$2.$3").replace(".",""),e}a.d(T,{jn:()=>w,Gq:()=>f,Mv:()=>n,fA:()=>u,lR:()=>p,Y4:()=>D,uM:()=>v})},53405:(S,T,a)=>{a.d(T,{h:()=>v});var w=a(70022),f=a(94528),n=a(32856),u=a(28321),p=a(11730),D=a(5e3);let v=(()=>{class i{constructor(){this.APIURL="https://api.thegraph.com/subgraphs/name/ookurumi/titi-on-rinkeby",this.client=new w.f({uri:this.APIURL,cache:new f.h})}fetchMMFSwapPairHourData(t){return this.client.query({query:(0,n.Ps)("\n    query($id: ID,$time:Int) {\n      pair(id:$id) {\n        id\n        pairHourData(where: {hourStartTimestamp_gt: $time},orderBy: hourStartTimestamp,orderDirection: desc)  {\n          id\n          hourStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n        }\n     }\n   }\n  "),variables:{id:t.toLowerCase(),time:(0,u.Mv)()},fetchPolicy:"network-only"})}fetchMMFSwapPairDailyData(t){return this.client.query({query:(0,n.Ps)("\n    query($id: ID,$time:Int) {\n      pair(id:$id) {\n        id\n        pairDailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n        }\n     }\n   }\n  "),variables:{id:t.toLowerCase(),time:(0,u.Mv)()},fetchPolicy:"network-only"})}fetchAllSwapPairDailyData(){return this.client.query({query:(0,n.Ps)("\n    query($time:Int) {\n      pairs(orderBy: id,orderDirection: desc) {\n        id\n        fund0\n        fund1\n        prv\n        token1{\n          symbol\n          decimals\n        }\n        token0Twap\n        pairDailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n          token0Twap\n          prv\n        }\n        pairHourData(where: {hourStartTimestamp_gt: $time},orderBy: hourStartTimestamp,orderDirection: desc)  {\n          id\n          hourStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n          token0Twap\n          prv\n        }\n     }\n   }\n  "),variables:{time:(0,u.Mv)()},fetchPolicy:"network-only"})}fetchUniwapPairDailyData(){return this.client.query({query:(0,n.Ps)("\n    query($id: ID,$time:Int) {\n      uniswapPair(id:$id) {\n        fund0\n        fund1\n        liquidity\n        dailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          fund0\n          fund1\n          liquidity\n        }\n     }\n   }\n  "),variables:{id:p.wE.UniswapV2Pair.toLowerCase(),time:(0,u.Mv)()},fetchPolicy:"network-only"})}fetchDailyLPTokenStakedValue(){return this.client.query({query:(0,n.Ps)("\n    query($time:Int) \n    {\n        dailyLPStakings(where: {dayTimestamp_gt: $time},orderBy: dayTimestamp,orderDirection: desc)  {\n          id\n          dayTimestamp\n          stakedValue\n        }\n   }\n  "),variables:{id:p.wE.UniswapV2Pair.toLowerCase(),time:(0,u.Mv)()},fetchPolicy:"network-only"})}fetchMMFRewardDailyData(t){return this.client.query({query:(0,n.Ps)("\n    query($id: ID,$time:Int) {\n      pair(id:$id) {\n        id\n        mmfRewardDailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          mmfReward\n        }\n     }\n   }\n  "),variables:{id:t.toLowerCase(),time:(0,u.Mv)()},fetchPolicy:"network-only"})}fetchTodayMMFRewardData(t){return this.client.query({query:(0,n.Ps)("\n    query($id: ID,$pairId:ID) {\n      mmfrewardDailyData(id:$id) {\n        id\n        dayStartTimestamp\n        mmfReward\n      }\n      pair(id:$pairId) {\n        id\n        fund0\n        fund1\n      }\n   }\n  "),variables:{id:t.toLowerCase()+"-"+Number.parseInt((new Date).getTime()/864e5+""),pairId:t.toLowerCase()},fetchPolicy:"network-only"})}fetchMMFRewardHourDataIn24H(t){return this.client.query({query:(0,n.Ps)("\n    query($id: ID,$time: Int) {\n      pair(id:$id) {\n        id\n        mmfRewardHourData(where: {hourStartTimestamp_gt: $time},orderBy: hourStartTimestamp,orderDirection: desc)  {\n          id\n          hourStartTimestamp\n          mmfReward\n        }\n     }\n   }\n  "),variables:{id:t.toLowerCase(),time:Number.parseInt((new Date).getTime()/1e3-86400+"")},fetchPolicy:"network-only"})}fetchTiTiStakingDailyData(){return this.client.query({query:(0,n.Ps)("\n    query($time:Int) {\n      tiTiStakingEpochDailyDatas(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n        id\n        dayStartTimestamp\n        tvl\n        apy\n        epoch{\n          id\n        }\n      }\n   }\n  "),variables:{time:(0,u.Mv)()},fetchPolicy:"network-only"})}fetchEachEpochTotalReward(t){return this.client.query({query:(0,n.Ps)("\n    query($id: ID) {\n      tiTiStakingEpoches(where: {id_lt: $id}) {\n        tvl\n        totalReward\n     }\n   }\n  "),variables:{id:t},fetchPolicy:"network-only"})}fetchVaultFund(t){return this.client.query({query:(0,n.Ps)("\n    query($id: ID,$time:Int) {\n      fundVault(id:$id) {\n        id\n        address\n        dailyBalance(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          balance\n          token{\n            symbol\n            decimals\n          }\n        }\n     }\n   }\n  "),variables:{id:t,time:(0,u.Mv)()},fetchPolicy:"network-only"})}fetchLastReOrdersData(){return this.client.query({query:(0,n.Ps)("\n    query {\n      reOrders(first: 1, orderBy: lastReordersTime, orderDirection: desc) {\n        id\n        lastReordersTime\n        reordersCondition\n        pavAmount\n      }\n   }\n  "),variables:{},fetchPolicy:"network-only"})}fetchHistoricalMMFStakingEpoch(t){return this.client.query({query:(0,n.Ps)("\n    query ($epochNum:Int){\n      mmfstakingEpoches(where:{epochNum_lt:$epochNum}){\n        epochNum\n        startTimestamp\n        periodFinish\n        totalReward\n      }\n   }\n  "),variables:{epochNum:1*t},fetchPolicy:"network-only"})}fetchHistoricalLPStakingEpoch(t){return this.client.query({query:(0,n.Ps)("\n    query ($epochNum:Int){\n      lpstakingEpoches(where:{epochNum_lt:$epochNum}){\n        epochNum\n        startTimestamp\n        periodFinish\n        totalReward\n      }\n   }\n  "),variables:{epochNum:1*t},fetchPolicy:"network-only"})}fetchTiTiStakingUserRank(t){return this.client.query({query:(0,n.Ps)("\n    query($rank: Int) {\n      tiTiUserStakings(orderBy: stakedValue, orderDirection: desc,first:$rank) {\n        id\n        stakedValue\n      }\n   }\n  "),variables:{rank:t},fetchPolicy:"network-only"})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=D.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},11730:(S,T,a)=>{a.d(T,{Uc:()=>e,fV:()=>t,wE:()=>r});var w=a(98538),f=a.n(w),n=a(5e3),u=a(5437),p=a(94602),D=a(57261),v=a(48966),i=a(31657);let e=(()=>{class s{constructor(o,h,c,l,d){this.web3ModalService=o,this.accountService=h,this._snackBar=c,this.dialog=l,this.refreshService=d,this.badge=0,this.recentTransaction=new Set(JSON.parse(localStorage.getItem("recentTransaction")||"[]"))}clearBadge(){this.badge=0}initWeb3(){return new Promise((o,h)=>{this.web3?(this.web3.currentProvider||this.web3.setProvider(this.web3ModalService.provider),o()):Promise.all([a.e(445).then(a.t.bind(a,34445,23)),this.web3ModalService.getProvider()]).then(([c,l])=>{this.web3=new c.default(l),o()}).catch(h)})}setProvider(o){return this.initWeb3().then(()=>this.web3.setProvider(o))}invokeContract(o,h,c,l){return this.initWeb3().then(()=>Promise.all([this.getFunctionABI(o,h),this.accountService.getCurrentAccountAsyn()]).then(([d,b])=>{const P=this.web3.eth.abi.encodeFunctionCall(d,c),g={from:b,to:r[o],data:P,value:l};if("view"==d.stateMutability)return this.web3.eth.call(g).then(E=>this.web3.eth.abi.decodeParameters(d.outputs,E));{let E="";return this.web3.eth.sendTransaction(g).on("transactionHash",y=>{E=y;const m=Array.from(this.recentTransaction);m.unshift({txHash:y,contractName:o,functionName:h,params:c,receipt:null}),this.recentTransaction=new Set(m),localStorage.setItem("recentTransaction",JSON.stringify(m)),this.badge++}).on("receipt",y=>{this.recentTransaction.forEach(m=>{m.txHash===y.transactionHash&&(m.receipt=y)}),localStorage.setItem("recentTransaction",JSON.stringify(Array.from(this.recentTransaction))),y.status?(this.refreshService.invokeFunctions(),this._snackBar.open("Successful transaction!","close",{horizontalPosition:"center",verticalPosition:"top",duration:3e3})):this._snackBar.open("Transaction failed!","close",{horizontalPosition:"center",verticalPosition:"top",duration:3e3})}).on("error",y=>{this.recentTransaction.forEach(m=>{m.txHash===E&&(m.receipt={status:!1})}),this._snackBar.open("Transaction failed!","close",{horizontalPosition:"center",verticalPosition:"top",duration:3e3})}).then(y=>y)}})).catch(d=>{throw this._snackBar.open("Unknown Error!","close",{horizontalPosition:"center",verticalPosition:"top",duration:3e3}),d})}getFunctionABI(o,h){return fetch(`/assets/abi/${o}.json`).then(c=>c.text()).then(c=>JSON.parse(c).abi).then(c=>{const l=c.filter(d=>d.name==h&&"function"==d.type);if(0===l.length)throw new Error("No such function");return l[0]})}decodeLog(o,h,c){return this.initWeb3().then(()=>this.web3.eth.abi.decodeLog(o,h,c))}openApproveModal(o,h,c,l){this.accountService.getCurrentAccountAsyn().then(d=>this.invokeContract(o,"allowance",[d,r[c]])).then(d=>{h.gt(new(f())(d[0]))?a.e(288).then(a.bind(a,30288)).then(({ApproveModalComponent:b})=>{const P=this.dialog.open(b);P.componentInstance.approveToken=o,P.componentInstance.approveValue=t.toString(),P.componentInstance.approveSpender=c,P.afterClosed().subscribe(l)}):l(!0)})}}return s.\u0275fac=function(o){return new(o||s)(n.LFG(u.y),n.LFG(p.B),n.LFG(D.ux),n.LFG(v.uw),n.LFG(i.g))},s.\u0275prov=n.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const t=new(f())("2").pow(new(f())("256")).sub(new(f())("1")),r={TiUSD:"0x6470CBF042B47dDF0Ef0B6E4698d1E07B81E79EB",TiTiToken:"0x58B18861B43B4cD87cd83AD9BB47617D4507e008",USDC:"0x36f0DED0eD08930A78bb0D32574D60a2f030AD5F",MAMMSwapPair:"0x63ea4F07d36E2b430Be0dC10442b0e7dA41172f4",MarketMakerFund:"0x3A952d584948E60E2cA30ABD6F1C4C606d7d1191",MMFLPStakingPool:"0xb7F100c381Bf5cc1f8091Ad6F06723e46a890F66",LPStakingPool:"0x49E49aC492948d57E34A0cb31f47747c4ce6fA88",RainyDayFundVault:"0x7a0b80Bb0966ddaDA2E7B8546D0dB63C77ba449b",ProtocolFeeVault:"0x3e2C38065Db78B62e1c6A73d25E839eF3c4A5E88",ReOrdersController:"0x10c9EbD914582054C09e1785761297A36856Ed7b",TiTiStaking:"0x0f7E1871F4b16087d9536263C531D508Abf37981",UniswapV2Pair:"0x0398404fd77459a6736257cf1D1433cAc0186793",TiTiBackendV1:"0x1447A7b9f0a457115e8bF1CE09b84ec3fC7b1b39",TiTiMerkleDistributor:"0x10e65D6090F188487EEfff54725Bc4b6fF394051"}}}]);