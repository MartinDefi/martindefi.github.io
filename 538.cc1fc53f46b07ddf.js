"use strict";(self.webpackChunkapp_titi_frontend=self.webpackChunkapp_titi_frontend||[]).push([[538],{28321:(C,w,i)=>{function v(){const r=(new Date).getTime(),e=[];let n=36e5*parseInt(r/36e5+"");for(let h=0;h<720;h++)e.push(n),n-=36e5;return e}function T(){const r=(new Date).getTime(),e=[];let n=864e5*parseInt(r/864e5+"");for(let h=0;h<30;h++)e.push(n),n-=864e5;return e}function o(){const r=(new Date).getTime();return 86400*parseInt(r/864e5+"")-2592e3}function p(t){return t>0?[parseInt(t/864e5+"")+"d",parseInt(t%864e5/36e5+"")+"h",parseInt(t%36e5/6e4+"")+"m"].join(":"):[" -- d"," -- h"," -- m"].join(":")}function D(t){return t>0?[parseInt(t/864e5+"")+"d",parseInt(t%864e5/36e5+"")+"h",parseInt(t%36e5/6e4+"")+"m",parseInt(t%6e4/1e3+"")+"s"].join(":"):[" -- d"," -- h"," -- m"," -- s"].join(":")}function A(t){let r=t;const e=r.substring(0,1),n=r.substring(1,2);if(r.length>1&&"0"===e&&"."!==n&&(r=r.substring(1,2)),"."===e&&(r=""),-1!==r.indexOf(".")){let h=r.substring(r.indexOf(".")+1);-1!==h.indexOf(".")&&(r=r.substring(0,r.indexOf(".")+h.indexOf(".")+1))}return r=r.replace(/[^\d^\.]+/g,""),r}function y(t){let r=A(t);return-1===r.indexOf(".")&&(r+=".0000"),r=r.replace(/^(\-)*(\d+)\.(\d\d\d\d).*$/,"$1$2.$3").replace(".",""),r}i.d(w,{jn:()=>v,Gq:()=>T,Mv:()=>o,fA:()=>p,lR:()=>D,Y4:()=>A,uM:()=>y})},18538:(C,w,i)=>{i.r(w),i.d(w,{TestnetModule:()=>U});var v=i(69808),T=i(91083),o=i(5963),p=i(54004),D=i(28321),A=i(98538),y=i.n(A),t=i(5e3),r=i(53405),e=i(31657),n=i(94602),h=i(11730),b=i(68326),d=i(47423),g=i(75303);function l(s,u){if(1&s&&(t.TgZ(0,"div",30),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"numberFormat"),t.qZA(),t.qZA()),2&s){const a=u.$implicit,c=u.index;t.xp6(2),t.Oqu(c+1),t.xp6(2),t.Oqu(a.address),t.xp6(2),t.hij("",t.xi3(7,3,a.amount,4)," TiTi")}}const m=[{path:"",component:(()=>{class s{constructor(a,c,Z,M){this.graphService=a,this.refreshService=c,this.accountService=Z,this.web3Service=M,this.USDCBalance=0,this.futureString="2022/04/30 00:00:00",this.TiTiBalance=0,this.stakedTiTi=0,this.myRank="100+",this.rank=100,this.currentAddress="",this.stakingList=[]}ngOnInit(){this.initData(),this.unregister=this.refreshService.registerFunction(()=>this.initData()),this.counter$=(0,o.H)(0,1e3).pipe((0,p.U)(()=>{const a=new Date(this.futureString).getTime()-(new Date).getTime();return(0,D.fA)(a)}))}ngOnDestroy(){this.unregister()}initData(){this.accountService.getCurrentAccountAsyn().then(a=>(this.currentAddress=a,this.fetchTiTiStakingUserRank())),this.fetchBalanceOfUSDC(),this.fetchTiTiBalance(),this.fetchStakedTiTi()}fetchTiTiStakingUserRank(){this.graphService.fetchTiTiStakingUserRank(this.rank).then(({data:a})=>{this.stakingList=a.tiTiUserStakings.map((c,Z)=>(c.id===this.currentAddress.toLowerCase()&&(this.myRank=`${Z+1}`),{address:c.id,amount:c.stakedValue/10**18}))})}fetchBalanceOfUSDC(){this.accountService.getCurrentAccountAsyn().then(a=>this.web3Service.invokeContract("USDC","balanceOf",[a]).then(c=>{this.USDCBalance=c[0]/10**6}))}fetchTiTiBalance(){return this.accountService.getCurrentAccountAsyn().then(a=>this.web3Service.invokeContract("TiTiToken","balanceOf",[a]).then(c=>{this.TiTiBalance=c[0]/10**18}))}fetchStakedTiTi(){return this.accountService.getCurrentAccountAsyn().then(a=>Promise.all([this.web3Service.invokeContract("TiTiStaking","getStakeValue",[a]),this.web3Service.invokeContract("TiTiStaking","users",[a]),this.web3Service.invokeContract("TiTiStaking","WITHDRAW_DURATION",[]),this.web3Service.invokeContract("TiTiStaking","UNBONDING_DURATION",[]),this.web3Service.invokeContract("TiTiStaking","totalTiTi",[])]).then(([c,Z,M,O,_])=>{const k=new(y())(Z.share),q=new(y())(Z.unbondShare);let E=0,I=0;1e3*Z.unbondTime+1e3*O[0]<=(new Date).getTime()?E=k.isZero()?0:Number.parseFloat((new(y())(c[0]).mul(q).div(k).div(new(y())(10**14)).toNumber()/1e4).toFixed(4)):I=k.isZero()?0:Number.parseFloat((new(y())(c[0]).mul(q).div(k).div(new(y())(10**14)).toNumber()/1e4).toFixed(4)),this.stakedTiTi=c[0]/10**18-I-E}))}claimMUSDC(){this.web3Service.invokeContract("USDC","claim",[]).then(a=>{})}}return s.\u0275fac=function(a){return new(a||s)(t.Y36(r.h),t.Y36(e.g),t.Y36(n.B),t.Y36(h.Uc))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-testnet"]],decls:102,vars:18,consts:[[1,"testnet-wrapper"],[2,"grid-column-start","span 2"],[1,"divider"],["routerLink","/testnet",2,"font-size","16px"],[2,"display","grid","width","100%","grid-template-columns","1fr 1fr 1fr","padding","24px 0"],["mat-raised-button","","color","primary","routerLink","/mmf",2,"width","80%","justify-self","start"],["mat-raised-button","","color","primary","routerLink","/lpmining",2,"width","80%","justify-self","center"],["mat-raised-button","","color","primary","routerLink","/use2earn",2,"width","80%","justify-self","end"],[1,"img-wrapper",2,"grid-column-start","span 1","width","100%","height","100%"],["src","assets/imgs/logo.png","alt","logo",2,"max-height","150px"],[2,"grid-column-start","span 3","height","12px"],[1,"mat-elevation-z4",2,"grid-column-start","span 3","display","grid","width","100%","grid-template-columns","1fr 1fr 1fr","grid-template-rows","80px 40px 40px 40px auto","padding","24px 36px"],[2,"grid-column-start","span 3","justify-self","center"],[2,"grid-column-start","span 2","grid-row-start","span 3","display","grid","width","100%","grid-template-columns","1fr 1fr","row-gap","12px"],[2,"justify-self","center"],[2,"grid-column-start","span 1","grid-row-start","span 4","width","100%","height","100%","display","grid","grid-template-rows","auto 40px"],[1,"img-wrapper"],["mat-raised-button","","color","primary",2,"width","80%","justify-self","center",3,"click"],[1,"mat-elevation-z4",2,"grid-column-start","span 3","display","grid","width","100%","grid-template-columns","repeat(12,1fr)","padding","24px 36px"],[2,"grid-column-start","span 12","justify-self","center"],[2,"grid-column-start","span 3","justify-self","start"],[2,"grid-column-start","span 12","justify-self","center","padding","24px 0 12px"],[2,"grid-column-start","span 2","justify-self","center"],[2,"grid-column-start","span 6","justify-self","center"],[2,"grid-column-start","span 4","justify-self","center"],[1,"divider",2,"grid-column-start","span 12","margin","12px 0"],[2,"grid-column-start","span 12","max-height","250px","min-height","150px","overflow-y","scroll"],["style","display: grid;grid-template-columns:1fr  3fr 2fr;justify-items: center;padding: 8px 0;",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",2,"width","80%","justify-self","start"],["mat-raised-button","","color","primary",2,"width","80%","justify-self","center"],[2,"display","grid","grid-template-columns","1fr  3fr 2fr","justify-items","center","padding","8px 0"]],template:function(a,c){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"h2",1),t._uU(2,"TiTi Marketing Activities"),t.qZA(),t.TgZ(3,"p",1),t._uU(4,"We hope to help our community users become more familiar with TiTi through a series of TiTi Marketing activities, and at the same time further enhance TiTi's influence in the web3 world. "),t.qZA(),t._UZ(5,"div",2),t.TgZ(6,"h2",1),t._uU(7," TiTi Equestrian Park "),t.TgZ(8,"a",3),t.TgZ(9,"mat-icon"),t._uU(10," open_in_new "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",1),t.TgZ(12,"p"),t._uU(13,"Welcome to TiTi Racecourse, every user can become a heroic TiTi racer."),t.qZA(),t.TgZ(14,"p"),t._uU(15,"Activity time: 2022/04/30 - 2022/05/15"),t.qZA(),t.TgZ(16,"p"),t._uU(17,"Activity Rewards: Take the top 100 addresses and distribute $10,000 in rewards according to the proportion of TiTi Staked Amount"),t.qZA(),t.TgZ(18,"p"),t._uU(19,"Activity content: Each user address can receive a certain amount of Mock-USDC every 24 hours. We hope that users can use these Mock-USDC to obtain as many TiTi rewards as possible according to TiTi Tokenomics, and pledge them to the TiTi-Staking Pool. After the event, the top 100 stakers in the TiTi-Staking Pool will be taken, and a reward of $10,000 will be distributed according to the proportion of the stake. "),t.qZA(),t.TgZ(20,"p"),t._uU(21,"The behavior of obtaining TiTi is as follows:"),t.qZA(),t.TgZ(22,"div",4),t.TgZ(23,"button",5),t._uU(24,"MMF"),t.qZA(),t.TgZ(25,"button",6),t._uU(26,"LP Mining"),t.qZA(),t.TgZ(27,"button",7),t._uU(28,"Use To Earn"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div",8),t._UZ(30,"img",9),t.qZA(),t._UZ(31,"div",10),t.TgZ(32,"div",11),t.TgZ(33,"h3",12),t._uU(34,"Join TiTi Equestrian Park"),t.qZA(),t.TgZ(35,"div",13),t.TgZ(36,"span"),t._uU(37,"Your Mock-USDC:"),t.qZA(),t.TgZ(38,"span",14),t._uU(39),t.ALo(40,"numberFormat"),t.qZA(),t.TgZ(41,"span"),t._uU(42,"Last Claim Time:"),t.qZA(),t.TgZ(43,"span",14),t._uU(44),t.qZA(),t.TgZ(45,"span"),t._uU(46,"Claim Countdown"),t.qZA(),t.TgZ(47,"span",14),t._uU(48),t.ALo(49,"async"),t.qZA(),t.qZA(),t.TgZ(50,"div",15),t.TgZ(51,"div",16),t._UZ(52,"img",9),t.qZA(),t.TgZ(53,"button",17),t.NdJ("click",function(){return c.claimMUSDC()}),t._uU(54,"Claim 1000 Mock-USDC"),t.qZA(),t.qZA(),t.qZA(),t._UZ(55,"div",10),t.TgZ(56,"div",18),t.TgZ(57,"h3",19),t._uU(58,"Join TiTi Equestrian Park"),t.qZA(),t.TgZ(59,"span",20),t._uU(60,"Your TiTi Balance:"),t.qZA(),t.TgZ(61,"span",20),t._uU(62),t.ALo(63,"numberFormat"),t.qZA(),t.TgZ(64,"span",20),t._uU(65,"Your Staked Amount:"),t.qZA(),t.TgZ(66,"span",20),t._uU(67),t.ALo(68,"numberFormat"),t.qZA(),t.TgZ(69,"h3",21),t._uU(70),t.qZA(),t.TgZ(71,"span",22),t._uU(72,"Rank"),t.qZA(),t.TgZ(73,"span",23),t._uU(74,"Address"),t.qZA(),t.TgZ(75,"span",24),t._uU(76,"Staking Amount"),t.qZA(),t._UZ(77,"div",25),t.TgZ(78,"div",26),t.YNc(79,l,8,6,"div",27),t.qZA(),t.qZA(),t._UZ(80,"div",2),t.TgZ(81,"h2",1),t._uU(82," TiTi Bug Destroyer "),t.TgZ(83,"a",3),t.TgZ(84,"mat-icon"),t._uU(85," open_in_new "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(86,"p",1),t._uU(87,"Don't ignore any TiTI bugs you find, destroy them and claim your rewards!"),t.qZA(),t.TgZ(88,"div",1),t.TgZ(89,"p"),t._uU(90,"Activity time: 2022/04/30 - 2022/05/30"),t.qZA(),t.TgZ(91,"p"),t._uU(92,"Activity Rewards: $100 reward per Bug Destroyer"),t.qZA(),t.TgZ(93,"p"),t._uU(94,"Activity content: Users can report any bugs you find, including UI, Smart Contract, etc. Every user who reports a valid bug will receive a $100 reward. Your report is vital to TiTi Protocol, let's make it better together. "),t.qZA(),t.TgZ(95,"div",4),t.TgZ(96,"button",28),t._uU(97,"Bug Report"),t.qZA(),t.TgZ(98,"button",29),t._uU(99,"Join Discord"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(100,"div",8),t._UZ(101,"img",9),t.qZA(),t.qZA()),2&a&&(t.xp6(39),t.hij("",t.xi3(40,7,c.USDCBalance,4)," Mock-USDC"),t.xp6(5),t.Oqu(c.futureString),t.xp6(4),t.Oqu(t.lcZ(49,10,c.counter$)),t.xp6(14),t.hij("",t.xi3(63,12,c.TiTiBalance,4)," TiTi"),t.xp6(5),t.hij("",t.xi3(68,15,c.stakedTiTi,4)," TiTi"),t.xp6(3),t.hij("Your Rank: #",c.myRank,""),t.xp6(9),t.Q6J("ngForOf",c.stakingList))},directives:[T.yS,b.Hw,d.lW,T.rH,v.sg],pipes:[g.p,v.Ov],styles:[".testnet-wrapper[_ngcontent-%COMP%]{display:grid;width:100%;padding:12px 36px;grid-template-columns:1fr 1fr 1fr}.testnet-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:36px;margin-bottom:24px;font-weight:500}.testnet-wrapper[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px;font-weight:500}.titi-dark-theme[_nghost-%COMP%]   .divider[_ngcontent-%COMP%], .titi-dark-theme   [_nghost-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;width:100%;margin:20px 0;grid-column-start:span 3;background:linear-gradient(90deg,#90fac994,#0F5F4F,#90fac994)}.divider[_ngcontent-%COMP%]{height:1px;width:100%;margin:20px 0;grid-column-start:span 3;background:#afafaf5b}"]}),s})()}];let P=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[T.Bz.forChild(m)],T.Bz]}),s})();var S=i(87841);let U=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[v.ez,P,d.ot,b.Ps,S.m]]}),s})()},53405:(C,w,i)=>{i.d(w,{h:()=>y});var v=i(70022),T=i(94528),o=i(32856),p=i(28321),D=i(11730),A=i(5e3);let y=(()=>{class t{constructor(){this.APIURL="https://api.thegraph.com/subgraphs/name/ookurumi/titi-on-kovan",this.client=new v.f({uri:this.APIURL,cache:new T.h})}fetchMMFSwapPairHourData(e){return this.client.query({query:(0,o.Ps)("\n    query($id: ID,$time:Int) {\n      pair(id:$id) {\n        id\n        pairHourData(where: {hourStartTimestamp_gt: $time},orderBy: hourStartTimestamp,orderDirection: desc)  {\n          id\n          hourStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n        }\n     }\n   }\n  "),variables:{id:e.toLowerCase(),time:(0,p.Mv)()},fetchPolicy:"network-only"})}fetchMMFSwapPairDailyData(e){return this.client.query({query:(0,o.Ps)("\n    query($id: ID,$time:Int) {\n      pair(id:$id) {\n        id\n        pairDailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n        }\n     }\n   }\n  "),variables:{id:e.toLowerCase(),time:(0,p.Mv)()},fetchPolicy:"network-only"})}fetchAllSwapPairDailyData(){return this.client.query({query:(0,o.Ps)("\n    query($time:Int) {\n      pairs(orderBy: id,orderDirection: desc) {\n        id\n        fund0\n        fund1\n        prv\n        token1{\n          symbol\n          decimals\n        }\n        token0Twap\n        pairDailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n          token0Twap\n          prv\n        }\n        pairHourData(where: {hourStartTimestamp_gt: $time},orderBy: hourStartTimestamp,orderDirection: desc)  {\n          id\n          hourStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n          token0Twap\n          prv\n        }\n     }\n   }\n  "),variables:{time:(0,p.Mv)()},fetchPolicy:"network-only"})}fetchUniwapPairDailyData(){return this.client.query({query:(0,o.Ps)("\n    query($id: ID,$time:Int) {\n      uniswapPair(id:$id) {\n        fund0\n        fund1\n        liquidity\n        dailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          fund0\n          fund1\n          liquidity\n        }\n     }\n   }\n  "),variables:{id:D.wE.UniswapV2Pair.toLowerCase(),time:(0,p.Mv)()},fetchPolicy:"network-only"})}fetchDailyLPTokenStakedValue(){return this.client.query({query:(0,o.Ps)("\n    query($time:Int) \n    {\n        dailyLPStakings(where: {dayTimestamp_gt: $time},orderBy: dayTimestamp,orderDirection: desc)  {\n          id\n          dayTimestamp\n          stakedValue\n        }\n   }\n  "),variables:{id:D.wE.UniswapV2Pair.toLowerCase(),time:(0,p.Mv)()},fetchPolicy:"network-only"})}fetchMMFRewardDailyData(e){return this.client.query({query:(0,o.Ps)("\n    query($id: ID,$time:Int) {\n      pair(id:$id) {\n        id\n        mmfRewardDailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          mmfReward\n        }\n     }\n   }\n  "),variables:{id:e.toLowerCase(),time:(0,p.Mv)()},fetchPolicy:"network-only"})}fetchTodayMMFRewardData(e){return this.client.query({query:(0,o.Ps)("\n    query($id: ID,$pairId:ID) {\n      mmfrewardDailyData(id:$id) {\n        id\n        dayStartTimestamp\n        mmfReward\n      }\n      pair(id:$pairId) {\n        id\n        fund0\n        fund1\n      }\n   }\n  "),variables:{id:e.toLowerCase()+"-"+Number.parseInt((new Date).getTime()/864e5+""),pairId:e.toLowerCase()},fetchPolicy:"network-only"})}fetchMMFRewardHourDataIn24H(e){return this.client.query({query:(0,o.Ps)("\n    query($id: ID,$time: Int) {\n      pair(id:$id) {\n        id\n        mmfRewardHourData(where: {hourStartTimestamp_gt: $time},orderBy: hourStartTimestamp,orderDirection: desc)  {\n          id\n          hourStartTimestamp\n          mmfReward\n        }\n     }\n   }\n  "),variables:{id:e.toLowerCase(),time:Number.parseInt((new Date).getTime()/1e3-86400+"")},fetchPolicy:"network-only"})}fetchTiTiStakingDailyData(){return this.client.query({query:(0,o.Ps)("\n    query($time:Int) {\n      tiTiStakingEpochDailyDatas(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n        id\n        dayStartTimestamp\n        tvl\n        apy\n        epoch{\n          id\n        }\n      }\n   }\n  "),variables:{time:(0,p.Mv)()},fetchPolicy:"network-only"})}fetchEachEpochTotalReward(e){return this.client.query({query:(0,o.Ps)("\n    query($id: ID) {\n      tiTiStakingEpoches(where: {id_lt: $id}) {\n        tvl\n        totalReward\n     }\n   }\n  "),variables:{id:e},fetchPolicy:"network-only"})}fetchVaultFund(e){return this.client.query({query:(0,o.Ps)("\n    query($id: ID,$time:Int) {\n      fundVault(id:$id) {\n        id\n        address\n        dailyBalance(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          balance\n          token{\n            symbol\n            decimals\n          }\n        }\n     }\n   }\n  "),variables:{id:e,time:(0,p.Mv)()},fetchPolicy:"network-only"})}fetchLastReOrdersData(){return this.client.query({query:(0,o.Ps)("\n    query {\n      reOrders(first: 1, orderBy: lastReordersTime, orderDirection: desc) {\n        id\n        lastReordersTime\n        reordersCondition\n        pavAmount\n      }\n   }\n  "),variables:{},fetchPolicy:"network-only"})}fetchHistoricalMMFStakingEpoch(e){return this.client.query({query:(0,o.Ps)("\n    query ($epochNum:Int){\n      mmfstakingEpoches(where:{epochNum_lt:$epochNum}){\n        epochNum\n        startTimestamp\n        periodFinish\n        totalReward\n      }\n   }\n  "),variables:{epochNum:1*e},fetchPolicy:"network-only"})}fetchHistoricalLPStakingEpoch(e){return this.client.query({query:(0,o.Ps)("\n    query ($epochNum:Int){\n      lpstakingEpoches(where:{epochNum_lt:$epochNum}){\n        epochNum\n        startTimestamp\n        periodFinish\n        totalReward\n      }\n   }\n  "),variables:{epochNum:1*e},fetchPolicy:"network-only"})}fetchTiTiStakingUserRank(e){return this.client.query({query:(0,o.Ps)("\n    query($rank: Int) {\n      tiTiUserStakings(orderBy: stakedValue, orderDirection: desc,first:$rank) {\n        id\n        stakedValue\n      }\n   }\n  "),variables:{rank:e},fetchPolicy:"network-only"})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=A.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},11730:(C,w,i)=>{i.d(w,{Uc:()=>r,fV:()=>e,wE:()=>n});var v=i(98538),T=i.n(v),o=i(5e3),p=i(5437),D=i(94602),A=i(57261),y=i(48966),t=i(31657);let r=(()=>{class h{constructor(d,g,l,f,m){this.web3ModalService=d,this.accountService=g,this._snackBar=l,this.dialog=f,this.refreshService=m,this.badge=0,this.recentTransaction=new Set(JSON.parse(localStorage.getItem("recentTransaction")||"[]"))}clearBadge(){this.badge=0}initWeb3(){return new Promise((d,g)=>{this.web3?(this.web3.currentProvider||this.web3.setProvider(this.web3ModalService.provider),d()):Promise.all([i.e(445).then(i.t.bind(i,34445,23)),this.web3ModalService.getProvider()]).then(([l,f])=>{this.web3=new l.default(f),d()}).catch(g)})}setProvider(d){return this.initWeb3().then(()=>this.web3.setProvider(d))}invokeContract(d,g,l,f){return this.initWeb3().then(()=>Promise.all([this.getFunctionABI(d,g),this.accountService.getCurrentAccountAsyn()]).then(([m,P])=>{const S=this.web3.eth.abi.encodeFunctionCall(m,l),s={from:P,to:n[d],data:S,value:f};return"view"==m.stateMutability?this.web3.eth.call(s).then(u=>this.web3.eth.abi.decodeParameters(m.outputs,u)):this.web3.eth.sendTransaction(s).on("transactionHash",u=>{const a=Array.from(this.recentTransaction);a.unshift({txHash:u,contractName:d,functionName:g,params:l,receipt:null}),this.recentTransaction=new Set(a),localStorage.setItem("recentTransaction",JSON.stringify(a)),this.badge++}).on("receipt",u=>{this.recentTransaction.forEach(a=>{a.txHash===u.transactionHash&&(a.receipt=u)}),localStorage.setItem("recentTransaction",JSON.stringify(Array.from(this.recentTransaction))),u.status?(this.refreshService.invokeFunctions(),this._snackBar.open("Successful transaction!","close",{horizontalPosition:"center",verticalPosition:"top",duration:3e3})):this._snackBar.open("Transaction failed!","close",{horizontalPosition:"center",verticalPosition:"top",duration:3e3})}).on("error",u=>{this._snackBar.open("Transaction failed!","close",{horizontalPosition:"center",verticalPosition:"top",duration:3e3})}).then(u=>u)})).catch(m=>{throw this._snackBar.open("Unknown Error!","close",{horizontalPosition:"center",verticalPosition:"top",duration:3e3}),m})}getFunctionABI(d,g){return fetch(`/assets/abi/${d}.json`).then(l=>l.text()).then(l=>JSON.parse(l).abi).then(l=>{const f=l.filter(m=>m.name==g&&"function"==m.type);if(0===f.length)throw new Error("No such function");return f[0]})}decodeLog(d,g,l){return this.initWeb3().then(()=>this.web3.eth.abi.decodeLog(d,g,l))}openApproveModal(d,g,l,f){this.accountService.getCurrentAccountAsyn().then(m=>this.invokeContract(d,"allowance",[m,n[l]])).then(m=>{g.gt(new(T())(m[0]))?i.e(288).then(i.bind(i,30288)).then(({ApproveModalComponent:P})=>{const S=this.dialog.open(P);S.componentInstance.approveToken=d,S.componentInstance.approveValue=e.toString(),S.componentInstance.approveSpender=l,S.afterClosed().subscribe(f)}):f(!0)})}}return h.\u0275fac=function(d){return new(d||h)(o.LFG(p.y),o.LFG(D.B),o.LFG(A.ux),o.LFG(y.uw),o.LFG(t.g))},h.\u0275prov=o.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})();const e=new(T())("2").pow(new(T())("256")).sub(new(T())("1")),n={TiUSDToken:"0xe2450bF757190a621328e9950054F66A67279c3a",TiTiToken:"0x7eF0AB70304A467C1Eb9C8bc0abF9D3cB3325edE",USDC:"0xe9225ee0e82180c64d4F55dd08B7bDC4b15Fc404",MAMMSwapPair:"0xFdA623Ed67307C4eF8e36C0Cc0eE4f5D792a0687",MarketMakerFund:"0xEDc1bB5C8143946abA10cD44e265A32227aa3791",MMFLPStakingPool:"0x62E322a435b4C05e71b63B80da8F766D67e3E0eD",LPStakingPool:"0xC588086986cCDDDa14ccFa31797290A037A1f1FD",RainyDayFundVault:"0xC4B67E8de9Ba576710Ae11B26cd73F9541EC7F26",ProtocolFeeVault:"0xa7F1c31E6638c7545A147B9aCFe8E9149bC9622C",ReOrdersController:"0x62e802eDD404D03c9452754bBb97Dd7B728De050",TiTiStaking:"0x17AD0812cc1DA0855C0A1ECaF97CfB0bcC716ee3",UniswapV2Pair:"0x08a95b02d8b765c56b382324b1695b1ddd982d4d",TiTiBackendV1:"0xeEd4d8D736Eeaf4a4781CD099B6f421823612d0F"}}}]);