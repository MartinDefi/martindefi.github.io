"use strict";(self.webpackChunkapp_titi_frontend=self.webpackChunkapp_titi_frontend||[]).push([[538],{28321:(P,F,i)=>{function D(){const n=(new Date).getTime(),e=[];let r=36e5*parseInt(n/36e5+"");for(let l=0;l<720;l++)e.push(r),r-=36e5;return e}function g(){const n=(new Date).getTime(),e=[];let r=864e5*parseInt(n/864e5+"");for(let l=0;l<30;l++)e.push(r),r-=864e5;return e}function u(){const n=(new Date).getTime();return 86400*parseInt(n/864e5+"")-2592e3}function p(t){return t>0?[parseInt(t/864e5+"")+"d",parseInt(t%864e5/36e5+"")+"h",parseInt(t%36e5/6e4+"")+"m"].join(":"):[" -- d"," -- h"," -- m"].join(":")}function A(t){return t>0?[parseInt(t/864e5+"")+"d",parseInt(t%864e5/36e5+"")+"h",parseInt(t%36e5/6e4+"")+"m",parseInt(t%6e4/1e3+"")+"s"].join(":"):[" -- d"," -- h"," -- m"," -- s"].join(":")}function v(t){let n=t;const e=n.substring(0,1),r=n.substring(1,2);if(n.length>1&&"0"===e&&"."!==r&&(n=n.substring(1,2)),"."===e&&(n=""),-1!==n.indexOf(".")){let l=n.substring(n.indexOf(".")+1);-1!==l.indexOf(".")&&(n=n.substring(0,n.indexOf(".")+l.indexOf(".")+1))}return n=n.replace(/[^\d^\.]+/g,""),n}function f(t){let n=v(t);return n=n.replace(/^(\-)*(\d+)\.(\d\d\d\d).*$/,"$1$2.$3").replace(".",""),n}i.d(F,{jn:()=>D,Gq:()=>g,Mv:()=>u,fA:()=>p,lR:()=>A,Y4:()=>v,uM:()=>f})},18538:(P,F,i)=>{i.r(F),i.d(F,{TestnetModule:()=>Z});var D=i(69808),g=i(91083),u=i(5963),p=i(54004),A=i(28321),v=i(98538),f=i.n(v),t=i(5e3),n=i(53405),e=i(31657),r=i(94602),l=i(11730),S=i(68326),o=i(47423),T=i(75303);function h(s,d){if(1&s&&(t.TgZ(0,"div",28),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"numberFormat"),t.qZA(),t.qZA()),2&s){const a=d.$implicit,c=d.index;t.xp6(2),t.Oqu(c+1),t.xp6(2),t.Oqu(a.address),t.xp6(2),t.hij("",t.xi3(7,3,a.amount,4)," TiTi")}}const m=[{path:"",component:(()=>{class s{constructor(a,c,E,U){this.graphService=a,this.refreshService=c,this.accountService=E,this.web3Service=U,this.USDCBalance=0,this.futureString="2022/04/30 00:00:00",this.TiTiBalance=0,this.stakedTiTi=0,this.myRank="100+",this.rank=100,this.currentAddress="",this.stakingList=[]}ngOnInit(){this.initData(),this.unregister=this.refreshService.registerFunction(()=>this.initData()),this.counter$=(0,u.H)(0,1e3).pipe((0,p.U)(()=>{const a=new Date(this.futureString).getTime()-(new Date).getTime();return(0,A.fA)(a)}))}ngOnDestroy(){this.unregister()}initData(){this.accountService.getCurrentAccountAsyn().then(a=>(this.currentAddress=a,this.fetchTiTiStakingUserRank())),this.fetchBalanceOfUSDC(),this.fetchTiTiBalance(),this.fetchStakedTiTi()}fetchTiTiStakingUserRank(){this.graphService.fetchTiTiStakingUserRank(this.rank).then(({data:a})=>{this.stakingList=a.tiTiUserStakings.map((c,E)=>(c.id===this.currentAddress.toLowerCase()&&(this.myRank=`${E+1}`),{address:c.id,amount:c.stakedValue/10**18}))})}fetchBalanceOfUSDC(){this.accountService.getCurrentAccountAsyn().then(a=>this.web3Service.invokeContract("USDC","balanceOf",[a]).then(c=>{this.USDCBalance=c[0]/10**6}))}fetchTiTiBalance(){return this.accountService.getCurrentAccountAsyn().then(a=>this.web3Service.invokeContract("TiTiToken","balanceOf",[a]).then(c=>{this.TiTiBalance=c[0]/10**18}))}fetchStakedTiTi(){return this.accountService.getCurrentAccountAsyn().then(a=>Promise.all([this.web3Service.invokeContract("TiTiStaking","getStakeValue",[a]),this.web3Service.invokeContract("TiTiStaking","users",[a]),this.web3Service.invokeContract("TiTiStaking","WITHDRAW_DURATION",[]),this.web3Service.invokeContract("TiTiStaking","UNBONDING_DURATION",[]),this.web3Service.invokeContract("TiTiStaking","totalTiTi",[])]).then(([c,E,U,q,I])=>{const B=new(f())(E.share),k=new(f())(E.unbondShare);let M=0,b=0;1e3*E.unbondTime+1e3*q[0]<=(new Date).getTime()?M=B.isZero()?0:Number.parseFloat((new(f())(c[0]).mul(k).div(B).div(new(f())(10**14)).toNumber()/1e4).toFixed(4)):b=B.isZero()?0:Number.parseFloat((new(f())(c[0]).mul(k).div(B).div(new(f())(10**14)).toNumber()/1e4).toFixed(4)),this.stakedTiTi=c[0]/10**18-b-M}))}}return s.\u0275fac=function(a){return new(a||s)(t.Y36(n.h),t.Y36(e.g),t.Y36(r.B),t.Y36(l.Uc))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-testnet"]],decls:97,vars:18,consts:[[1,"testnet-wrapper"],[2,"grid-column-start","span 2"],[1,"divider"],["routerLink","/testnet",2,"font-size","16px"],[2,"display","grid","width","100%","grid-template-columns","1fr 1fr 1fr","padding","24px 0"],["mat-raised-button","","color","primary","routerLink","/mmf",2,"width","80%","justify-self","start"],["mat-raised-button","","color","primary","routerLink","/lpmining",2,"width","80%","justify-self","center"],["mat-raised-button","","color","primary","routerLink","/use2earn",2,"width","80%","justify-self","end"],[1,"img-wrapper",2,"grid-column-start","span 1","width","100%","height","100%"],["src","assets/imgs/logo.png","alt","logo",2,"max-height","150px"],[2,"grid-column-start","span 3","height","12px"],[1,"mat-elevation-z4",2,"grid-column-start","span 3","display","grid","width","100%","grid-template-columns","1fr 1fr 1fr","grid-template-rows","80px 40px 40px 40px auto","padding","24px 36px"],[2,"grid-column-start","span 3","justify-self","center"],[2,"grid-column-start","span 2","grid-row-start","span 3","display","grid","width","100%","grid-template-columns","1fr 1fr","row-gap","12px"],[2,"justify-self","center"],[2,"grid-column-start","span 1","grid-row-start","span 4","width","100%","height","100%","display","grid","grid-template-rows","auto 40px"],[1,"img-wrapper"],["mat-raised-button","","color","primary",2,"width","80%","justify-self","center"],[1,"mat-elevation-z4",2,"grid-column-start","span 3","display","grid","width","100%","grid-template-columns","repeat(12,1fr)","padding","24px 36px"],[2,"grid-column-start","span 12","justify-self","center"],[2,"grid-column-start","span 3","justify-self","start"],[2,"grid-column-start","span 12","justify-self","center","padding","24px 0 12px"],[2,"grid-column-start","span 2","justify-self","center"],[2,"grid-column-start","span 6","justify-self","center"],[2,"grid-column-start","span 4","justify-self","center"],[1,"divider",2,"grid-column-start","span 12","margin","12px 0"],[2,"grid-column-start","span 12","max-height","250px","min-height","150px","overflow-y","scroll"],["style","display: grid;grid-template-columns:1fr  3fr 2fr;justify-items: center;padding: 8px 0;",4,"ngFor","ngForOf"],[2,"display","grid","grid-template-columns","1fr  3fr 2fr","justify-items","center","padding","8px 0"]],template:function(a,c){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"h2",1),t._uU(2,"TiTi Marketing Activities"),t.qZA(),t.TgZ(3,"p",1),t._uU(4,"\u6211\u4eec\u5e0c\u671b\u901a\u8fc7\u4e00\u7cfb\u5217\u7684TiTi Marketing activities\uff0c\u5e2e\u52a9\u6211\u4eec\u7684\u793e\u533a\u7528\u6237\u66f4\u52a0\u719f\u6089TiTi\uff0c\u540c\u65f6\u4e5f\u8fdb\u4e00\u6b65\u63d0\u5347TiTi\u5728web3\u4e16\u754c\u4e2d\u7684\u5f71\u54cd\u529b\u3002 "),t.qZA(),t._UZ(5,"div",2),t.TgZ(6,"h2",1),t._uU(7," TiTi Equestrian Park "),t.TgZ(8,"a",3),t.TgZ(9,"mat-icon"),t._uU(10," open_in_new "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",1),t.TgZ(12,"p"),t._uU(13,"\u6b22\u8fce\u52a0\u5165TiTi\u8d5b\u9a6c\u573a\uff0c\u6bcf\u4e2a\u7528\u6237\u90fd\u53ef\u4ee5\u6210\u4e3a\u82f1\u52c7\u7684TiTi\u8d5b\u9a6c\u624b\u3002"),t.qZA(),t.TgZ(14,"p"),t._uU(15,"\u6d3b\u52a8\u65f6\u95f4\uff1a2022/04/30 - 2022/05/15"),t.qZA(),t.TgZ(16,"p"),t._uU(17,"\u6d3b\u52a8\u5956\u52b1\uff1a\u53d6\u6392\u540d\u524d100\u7684\u5730\u5740\uff0c\u6309\u7167TiTi Staked Amount\u5360\u6bd4\u5206\u914d$10,000\u5956\u52b1"),t.qZA(),t.TgZ(18,"p"),t._uU(19,"\u6d3b\u52a8\u5185\u5bb9\uff1a\u7528\u6237\u6bcf\u4e2a\u5730\u5740\u6bcf\u969424\u5c0f\u65f6\u53ef\u4ee5\u9886\u53d6\u4e00\u5b9a\u6570\u91cf\u7684Mock-USDC\uff0c\u6211\u4eec\u5e0c\u671b\u7528\u6237\u6839\u636eTiTi Tokenomics\uff0c\u4f7f\u7528\u8fd9\u4e9bMock-USDC\u5c3d\u53ef\u80fd\u591a\u7684\u83b7\u5f97TiTi\u5956\u52b1\uff0c\u5e76\u4e14\u8d28\u62bc\u5230TiTi-Staking Pool\u4e2d\uff0c\u6211\u4eec\u4f1a\u5728\u6d3b\u52a8\u7ed3\u675f\u540e\uff0c\u53d6TiTi-Staking Pool\u4e2d\u7684\u524d100\u4e2a\u8d28\u62bc\u8005\uff0c\u5e76\u6309\u7167\u8d28\u62bc\u91cf\u5360\u6bd4\uff0c\u5206\u914d$10,000\u7684\u5956\u52b1\u3002 "),t.qZA(),t.TgZ(20,"p"),t._uU(21,"\u83b7\u5f97TiTi\u7684\u884c\u4e3a\u5982\u4e0b\uff1a"),t.qZA(),t.TgZ(22,"div",4),t.TgZ(23,"button",5),t._uU(24,"MMF"),t.qZA(),t.TgZ(25,"button",6),t._uU(26,"LP Mining"),t.qZA(),t.TgZ(27,"button",7),t._uU(28,"Use To Earn"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div",8),t._UZ(30,"img",9),t.qZA(),t._UZ(31,"div",10),t.TgZ(32,"div",11),t.TgZ(33,"h3",12),t._uU(34,"Join TiTi Equestrian Park"),t.qZA(),t.TgZ(35,"div",13),t.TgZ(36,"span"),t._uU(37,"Your Mock-USDC:"),t.qZA(),t.TgZ(38,"span",14),t._uU(39),t.ALo(40,"numberFormat"),t.qZA(),t.TgZ(41,"span"),t._uU(42,"Last Claim Time:"),t.qZA(),t.TgZ(43,"span",14),t._uU(44),t.qZA(),t.TgZ(45,"span"),t._uU(46,"Claim Countdown"),t.qZA(),t.TgZ(47,"span",14),t._uU(48),t.ALo(49,"async"),t.qZA(),t.qZA(),t.TgZ(50,"div",15),t.TgZ(51,"div",16),t._UZ(52,"img",9),t.qZA(),t.TgZ(53,"button",17),t._uU(54,"Claim 1000 Mock-USDC"),t.qZA(),t.qZA(),t.qZA(),t._UZ(55,"div",10),t.TgZ(56,"div",18),t.TgZ(57,"h3",19),t._uU(58,"Join TiTi Equestrian Park"),t.qZA(),t.TgZ(59,"span",20),t._uU(60,"Your TiTi Balance:"),t.qZA(),t.TgZ(61,"span",20),t._uU(62),t.ALo(63,"numberFormat"),t.qZA(),t.TgZ(64,"span",20),t._uU(65,"Your Staked Amount:"),t.qZA(),t.TgZ(66,"span",20),t._uU(67),t.ALo(68,"numberFormat"),t.qZA(),t.TgZ(69,"h3",21),t._uU(70),t.qZA(),t.TgZ(71,"span",22),t._uU(72,"Rank"),t.qZA(),t.TgZ(73,"span",23),t._uU(74,"Address"),t.qZA(),t.TgZ(75,"span",24),t._uU(76,"Staking Amount"),t.qZA(),t._UZ(77,"div",25),t.TgZ(78,"div",26),t.YNc(79,h,8,6,"div",27),t.qZA(),t.qZA(),t._UZ(80,"div",2),t.TgZ(81,"h2",1),t._uU(82," TiTi Bug Destroyer "),t.TgZ(83,"a",3),t.TgZ(84,"mat-icon"),t._uU(85," open_in_new "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(86,"p",1),t._uU(87,"\u4e0d\u8981\u5ffd\u89c6\u4f60\u53d1\u73b0\u7684\u4efb\u4f55TiTI bug\uff0c\u6bc1\u706d\u4ed6\u4eec\uff0c\u9886\u53d6\u5956\u52b1\uff01"),t.qZA(),t.TgZ(88,"div",1),t.TgZ(89,"p"),t._uU(90,"\u6d3b\u52a8\u65f6\u95f4\uff1a2022/04/30 - 2022/05/30"),t.qZA(),t.TgZ(91,"p"),t._uU(92,"\u6d3b\u52a8\u5956\u52b1\uff1a\u6bcf\u4e2aBug Destroyer $100\u7684\u5956\u52b1"),t.qZA(),t.TgZ(93,"p"),t._uU(94,"\u6d3b\u52a8\u5185\u5bb9\uff1a\u7528\u6237\u53ef\u4ee5\u62a5\u544a\u4efb\u4f55\u4f60\u53d1\u73b0\u7684bug\uff0c\u5305\u62ecUI,Smart Contract\uff0cetc\u3002\u6bcf\u4e00\u4e2a\u62a5\u544a\u6709\u6548Bug\u7684\u7528\u6237\u90fd\u5c06\u83b7\u5f97$100\u7684\u5956\u52b1\u3002\u4f60\u7684\u62a5\u544a\u5bf9\u4e8eTiTi Protocol\u81f3\u5173\u91cd\u8981\uff0c\u8ba9\u6211\u4eec\u4e00\u8d77\u53d8\u5f97\u66f4\u597d\u3002 "),t.qZA(),t.qZA(),t.TgZ(95,"div",8),t._UZ(96,"img",9),t.qZA(),t.qZA()),2&a&&(t.xp6(39),t.hij("",t.xi3(40,7,c.USDCBalance,4)," Mock-USDC"),t.xp6(5),t.Oqu(c.futureString),t.xp6(4),t.Oqu(t.lcZ(49,10,c.counter$)),t.xp6(14),t.hij("",t.xi3(63,12,c.TiTiBalance,4)," TiTi"),t.xp6(5),t.hij("",t.xi3(68,15,c.stakedTiTi,4)," TiTi"),t.xp6(3),t.hij("Your Rank: #",c.myRank,""),t.xp6(9),t.Q6J("ngForOf",c.stakingList))},directives:[g.yS,S.Hw,o.lW,g.rH,D.sg],pipes:[T.p,D.Ov],styles:[".testnet-wrapper[_ngcontent-%COMP%]{display:grid;width:100%;padding:12px 36px;grid-template-columns:1fr 1fr 1fr}.testnet-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:36px;margin-bottom:24px;font-weight:500}.testnet-wrapper[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px;font-weight:500}.titi-dark-theme[_nghost-%COMP%]   .divider[_ngcontent-%COMP%], .titi-dark-theme   [_nghost-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;width:100%;margin:20px 0;grid-column-start:span 3;background:linear-gradient(90deg,#90fac994,#0F5F4F,#90fac994)}.divider[_ngcontent-%COMP%]{height:1px;width:100%;margin:20px 0;grid-column-start:span 3;background:#afafaf5b}"]}),s})()}];let w=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[g.Bz.forChild(m)],g.Bz]}),s})();var C=i(87841);let Z=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[D.ez,w,o.ot,S.Ps,C.m]]}),s})()},53405:(P,F,i)=>{i.d(F,{h:()=>f});var D=i(70022),g=i(94528),u=i(32856),p=i(28321),A=i(11730),v=i(5e3);let f=(()=>{class t{constructor(){this.APIURL="/subgraphs/name/OOKURUMI/titi",this.client=new D.f({uri:this.APIURL,cache:new g.h})}fetchMMFSwapPairHourData(e){return this.client.query({query:(0,u.Ps)("\n    query($id: ID,$time:Int) {\n      pair(id:$id) {\n        id\n        pairHourData(where: {hourStartTimestamp_gt: $time},orderBy: hourStartTimestamp,orderDirection: desc)  {\n          id\n          hourStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n        }\n     }\n   }\n  "),variables:{id:e.toLowerCase(),time:(0,p.Mv)()},fetchPolicy:"network-only"})}fetchMMFSwapPairDailyData(e){return this.client.query({query:(0,u.Ps)("\n    query($id: ID,$time:Int) {\n      pair(id:$id) {\n        id\n        pairDailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n        }\n     }\n   }\n  "),variables:{id:e.toLowerCase(),time:(0,p.Mv)()},fetchPolicy:"network-only"})}fetchAllSwapPairDailyData(){return this.client.query({query:(0,u.Ps)("\n    query($time:Int) {\n      pairs(orderBy: id,orderDirection: desc) {\n        id\n        fund0\n        fund1\n        token1{\n          symbol\n          decimals\n        }\n        token0Twap\n        pairDailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n          token0Twap\n        }\n        pairHourData(where: {hourStartTimestamp_gt: $time},orderBy: hourStartTimestamp,orderDirection: desc)  {\n          id\n          hourStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n          token0Twap\n        }\n     }\n   }\n  "),variables:{time:(0,p.Mv)()},fetchPolicy:"network-only"})}fetchUniwapPairDailyData(){return this.client.query({query:(0,u.Ps)("\n    query($id: ID,$time:Int) {\n      uniswapPair(id:$id) {\n        fund0\n        fund1\n        liquidity\n        dailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          fund0\n          fund1\n          liquidity\n        }\n     }\n   }\n  "),variables:{id:A.wE.UniswapV2Pair.toLowerCase(),time:(0,p.Mv)()},fetchPolicy:"network-only"})}fetchDailyLPTokenStakedValue(){return this.client.query({query:(0,u.Ps)("\n    query($time:Int) \n    {\n        dailyLPStakings(where: {dayTimestamp_gt: $time},orderBy: dayTimestamp,orderDirection: desc)  {\n          id\n          dayTimestamp\n          stakedValue\n        }\n   }\n  "),variables:{id:A.wE.UniswapV2Pair.toLowerCase(),time:(0,p.Mv)()},fetchPolicy:"network-only"})}fetchMMFRewardDailyData(e){return this.client.query({query:(0,u.Ps)("\n    query($id: ID,$time:Int) {\n      pair(id:$id) {\n        id\n        mmfRewardDailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          mmfReward\n        }\n     }\n   }\n  "),variables:{id:e.toLowerCase(),time:(0,p.Mv)()},fetchPolicy:"network-only"})}fetchTodayMMFRewardData(e){return this.client.query({query:(0,u.Ps)("\n    query($id: ID,$pairId:ID) {\n      mmfrewardDailyData(id:$id) {\n        id\n        dayStartTimestamp\n        mmfReward\n      }\n      pair(id:$pairId) {\n        id\n        fund0\n        fund1\n      }\n   }\n  "),variables:{id:e.toLowerCase()+"-"+Number.parseInt((new Date).getTime()/864e5+""),pairId:e.toLowerCase()},fetchPolicy:"network-only"})}fetchMMFRewardHourDataIn24H(e){return this.client.query({query:(0,u.Ps)("\n    query($id: ID,$time: Int) {\n      pair(id:$id) {\n        id\n        mmfRewardHourData(where: {hourStartTimestamp_gt: $time},orderBy: hourStartTimestamp,orderDirection: desc)  {\n          id\n          hourStartTimestamp\n          mmfReward\n        }\n     }\n   }\n  "),variables:{id:e.toLowerCase(),time:Number.parseInt((new Date).getTime()/1e3-86400+"")},fetchPolicy:"network-only"})}fetchTiTiStakingDailyData(){return this.client.query({query:(0,u.Ps)("\n    query($time:Int) {\n      tiTiStakingEpochDailyDatas(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n        id\n        dayStartTimestamp\n        tvl\n        apy\n        epoch{\n          id\n        }\n      }\n   }\n  "),variables:{time:(0,p.Mv)()},fetchPolicy:"network-only"})}fetchEachEpochTotalReward(e){return this.client.query({query:(0,u.Ps)("\n    query($id: ID) {\n      tiTiStakingEpoches(where: {id_lt: $id}) {\n        tvl\n        totalReward\n     }\n   }\n  "),variables:{id:e},fetchPolicy:"network-only"})}fetchVaultFund(e){return this.client.query({query:(0,u.Ps)("\n    query($id: ID,$time:Int) {\n      fundVault(id:$id) {\n        id\n        address\n        dailyBalance(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          balance\n          token{\n            symbol\n            decimals\n          }\n        }\n     }\n   }\n  "),variables:{id:e,time:(0,p.Mv)()},fetchPolicy:"network-only"})}fetchLastReOrdersData(){return this.client.query({query:(0,u.Ps)("\n    query {\n      reOrders(first: 1, orderBy: lastReordersTime, orderDirection: desc) {\n        id\n        lastReordersTime\n        reordersCondition\n        pavAmount\n      }\n   }\n  "),variables:{},fetchPolicy:"network-only"})}fetchHistoricalMMFStakingEpoch(e){return this.client.query({query:(0,u.Ps)("\n    query ($epochNum:Int){\n      mmfstakingEpoches(where:{epochNum_lt:$epochNum}){\n        epochNum\n        startTimestamp\n        periodFinish\n        totalReward\n      }\n   }\n  "),variables:{epochNum:1*e},fetchPolicy:"network-only"})}fetchHistoricalLPStakingEpoch(e){return this.client.query({query:(0,u.Ps)("\n    query ($epochNum:Int){\n      lpstakingEpoches(where:{epochNum_lt:$epochNum}){\n        epochNum\n        startTimestamp\n        periodFinish\n        totalReward\n      }\n   }\n  "),variables:{epochNum:1*e},fetchPolicy:"network-only"})}fetchTiTiStakingUserRank(e){return this.client.query({query:(0,u.Ps)("\n    query($rank: Int) {\n      tiTiUserStakings(orderBy: stakedValue, orderDirection: desc,first:$rank) {\n        id\n        stakedValue\n      }\n   }\n  "),variables:{rank:e},fetchPolicy:"network-only"})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},11730:(P,F,i)=>{i.d(F,{Uc:()=>n,fV:()=>e,wE:()=>r});var D=i(98538),g=i.n(D),u=i(5e3),p=i(5437),A=i(94602),v=i(57261),f=i(48966),t=i(31657);let n=(()=>{class l{constructor(o,T,h,y,m){this.web3ModalService=o,this.accountService=T,this._snackBar=h,this.dialog=y,this.refreshService=m,this.badge=0,this.recentTransaction=new Set(JSON.parse(localStorage.getItem("recentTransaction")||"[]"))}clearBadge(){this.badge=0}initWeb3(){return new Promise((o,T)=>{this.web3?(this.web3.currentProvider||this.web3.setProvider(this.web3ModalService.provider),o()):Promise.all([i.e(445).then(i.t.bind(i,34445,23)),this.web3ModalService.getProvider()]).then(([h,y])=>{this.web3=new h.default(y),o()}).catch(T)})}setProvider(o){return this.initWeb3().then(()=>this.web3.setProvider(o))}invokeContract(o,T,h,y){return this.initWeb3().then(()=>Promise.all([this.getFunctionABI(o,T),this.accountService.getCurrentAccountAsyn()]).then(([m,w])=>{const C=this.web3.eth.abi.encodeFunctionCall(m,h),s={from:w,to:r[o],data:C,value:y};return"view"==m.stateMutability?this.web3.eth.call(s).then(d=>this.web3.eth.abi.decodeParameters(m.outputs,d)):this.web3.eth.sendTransaction(s).on("transactionHash",d=>{const a=Array.from(this.recentTransaction);a.unshift({txHash:d,contractName:o,functionName:T,params:h,receipt:null}),this.recentTransaction=new Set(a),localStorage.setItem("recentTransaction",JSON.stringify(a)),this.badge++}).on("receipt",d=>{this.recentTransaction.forEach(a=>{a.txHash===d.transactionHash&&(a.receipt=d)}),localStorage.setItem("recentTransaction",JSON.stringify(Array.from(this.recentTransaction))),d.status?(this.refreshService.invokeFunctions(),this._snackBar.open("Successful transaction!","close",{horizontalPosition:"center",verticalPosition:"top",duration:3e3})):this._snackBar.open("Transaction failed!","close",{horizontalPosition:"center",verticalPosition:"top",duration:3e3})}).on("error",d=>{this._snackBar.open("Transaction failed!","close",{horizontalPosition:"center",verticalPosition:"top",duration:3e3})}).then(d=>d)})).catch(m=>{throw this._snackBar.open("Unknown Error!","close",{horizontalPosition:"center",verticalPosition:"top",duration:3e3}),m})}getFunctionABI(o,T){return fetch(`/assets/abi/${o}.json`).then(h=>h.text()).then(h=>JSON.parse(h).abi).then(h=>{const y=h.filter(m=>m.name==T&&"function"==m.type);if(0===y.length)throw new Error("No such function");return y[0]})}decodeLog(o,T,h){return this.initWeb3().then(()=>this.web3.eth.abi.decodeLog(o,T,h))}openApproveModal(o,T,h,y){this.accountService.getCurrentAccountAsyn().then(m=>this.invokeContract(o,"allowance",[m,r[h]])).then(m=>{T.gt(new(g())(m[0]))?i.e(288).then(i.bind(i,30288)).then(({ApproveModalComponent:w})=>{const C=this.dialog.open(w);C.componentInstance.approveToken=o,C.componentInstance.approveValue=e.toString(),C.componentInstance.approveSpender=h,C.afterClosed().subscribe(y)}):y(!0)})}}return l.\u0275fac=function(o){return new(o||l)(u.LFG(p.y),u.LFG(A.B),u.LFG(v.ux),u.LFG(f.uw),u.LFG(t.g))},l.\u0275prov=u.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const e=new(g())("2").pow(new(g())("256")).sub(new(g())("1")),r={TiUSDToken:"0x7fA0e7C8Fd34f08A6c371CF504b1957289F5c2BD",TiTiToken:"0xf1B853d97631FA060819f605D798fc9725213e05",USDC:"0x12353211B3c22d97de87A9202E661041c6B47aE9",MAMMSwapPair:"0x61386BBe624526DDb5c3008573E2483b30C1b0eb",MarketMakerFund:"0xCcD17Cfe6F254910e63746e01bd085d32D4e5847",MMFLPStakingPool:"0x6796832E73FEf4f2D7eC4a16dFe6166E79Efa724",LPStakingPool:"0x73e7DF577e729Cd3A85fcFF231E46f8269215721",RainyDayFundVault:"0xee59C27D5657e9f0F84C5c7aDe37C5E1c1dF0686",ProtocolFeeVault:"0xDA00190cCF12FFF217338C0c3B10632931aD378A",ReOrdersController:"0x3D346DB60a8D2b81650606208b07803cD0846420",TiTiStaking:"0x284c65C5F95Bcc863730685298873E43316d1AB2",UniswapV2Pair:"0x166b18105d2e5fdff9e1f3c6dd6556970200ca89",TiTiBackendV1:"0x66De97D275b79Ffee19Eb60C06975f83d961BBea"}}}]);