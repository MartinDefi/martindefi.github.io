"use strict";(self.webpackChunkapp_titi_frontend=self.webpackChunkapp_titi_frontend||[]).push([[1343],{28321:(C,E,r)=>{function u(){const e=(new Date).getTime(),t=[];let i=36e5*parseInt(e/36e5+"");for(let m=0;m<720;m++)t.push(i),i-=36e5;return t}function T(){const e=(new Date).getTime(),t=[];let i=864e5*parseInt(e/864e5+"");for(let m=0;m<30;m++)t.push(i),i-=864e5;return t}function n(){const e=(new Date).getTime();return 86400*parseInt(e/864e5+"")-2592e3}function h(a){return a>0?[parseInt(a/864e5+"")+"d",parseInt(a%864e5/36e5+"")+"h",parseInt(a%36e5/6e4+"")+"m"].join(":"):[" -- d"," -- h"," -- m"].join(":")}function c(a){return a>0?[parseInt(a/864e5+"")+"d",parseInt(a%864e5/36e5+"")+"h",parseInt(a%36e5/6e4+"")+"m",parseInt(a%6e4/1e3+"")+"s"].join(":"):[" -- d"," -- h"," -- m"," -- s"].join(":")}function P(a){let e=a;const t=e.substring(0,1),i=e.substring(1,2);if(e.length>1&&"0"===t&&"."!==i&&(e=e.substring(1,2)),"."===t&&(e=""),-1!==e.indexOf(".")){let m=e.substring(e.indexOf(".")+1);-1!==m.indexOf(".")&&(e=e.substring(0,e.indexOf(".")+m.indexOf(".")+1))}return e=e.replace(/[^\d^\.]+/g,""),e}r.d(E,{jn:()=>u,Gq:()=>T,Mv:()=>n,fA:()=>h,lR:()=>c,Y4:()=>P})},92134:(C,E,r)=>{r.d(E,{Q:()=>h});var u=r(5e3),T=r(87238),n=r(63874);let h=(()=>{class c{constructor(){this.color="warn",this.text="",this.position="after"}ngOnInit(){}}return c.\u0275fac=function(v){return new(v||c)},c.\u0275cmp=u.Xpm({type:c,selectors:[["titi-tooltip"]],inputs:{color:"color",text:"text",position:"position"},decls:4,vars:4,consts:[["matTooltipHideDelay","200",3,"matTooltip","matTooltipPosition","matTooltipClass"],["tooltip","matTooltip"],[2,"font-size","18px","line-height","24px","display","inline","vertical-align","middle",3,"color"]],template:function(v,a){1&v&&(u.TgZ(0,"span",0,1),u.TgZ(2,"mat-icon",2),u._uU(3," help_outline "),u.qZA(),u.qZA()),2&v&&(u.Q6J("matTooltip",a.text)("matTooltipPosition",a.position)("matTooltipClass","titi-tooltip-text"),u.xp6(2),u.Q6J("color",a.color))},directives:[T.gM,n.Hw],styles:[""]}),c})()},53405:(C,E,r)=>{r.d(E,{h:()=>v});var u=r(70022),T=r(94528),n=r(32856),h=r(28321),c=r(11730),P=r(5e3);let v=(()=>{class a{constructor(){this.APIURL="https://api.thegraph.com/subgraphs/name/ookurumi/titi-testnet-v3",this.client=new u.f({uri:this.APIURL,cache:new T.h})}fetchMMFSwapPairHourData(t){return this.client.query({query:(0,n.Ps)("\n    query($id: ID,$time:Int) {\n      pair(id:$id) {\n        id\n        pairHourData(where: {hourStartTimestamp_gt: $time},orderBy: hourStartTimestamp,orderDirection: desc)  {\n          id\n          hourStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n        }\n     }\n   }\n  "),variables:{id:t.toLowerCase(),time:(0,h.Mv)()},fetchPolicy:"network-only"})}fetchMMFSwapPairDailyData(t){return this.client.query({query:(0,n.Ps)("\n    query($id: ID,$time:Int) {\n      pair(id:$id) {\n        id\n        pairDailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          fund0\n          fund1\n          mmfFund0\n          mmfFund1\n          token0Price\n          token1Price\n        }\n     }\n   }\n  "),variables:{id:t.toLowerCase(),time:(0,h.Mv)()},fetchPolicy:"network-only"})}fetchAllSwapPairDailyData(){return this.client.query({query:(0,n.Ps)("\n    query($time:Int) {\n      pairs(orderBy: id,orderDirection: desc) {\n        id\n        fund0\n        fund1\n        prv\n        token1{\n          symbol\n          decimals\n        }\n        token0Twap\n        pairDailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n          token0Twap\n          prv\n        }\n        pairHourData(where: {hourStartTimestamp_gt: $time},orderBy: hourStartTimestamp,orderDirection: desc)  {\n          id\n          hourStartTimestamp\n          fund0\n          fund1\n          token0Price\n          token1Price\n          token0Twap\n          prv\n        }\n     }\n   }\n  "),variables:{time:(0,h.Mv)()},fetchPolicy:"network-only"})}fetchUniwapPairDailyData(){return this.client.query({query:(0,n.Ps)("\n    query($id: ID,$time:Int) {\n      uniswapPair(id:$id) {\n        fund0\n        fund1\n        liquidity\n        dailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          fund0\n          fund1\n          liquidity\n        }\n     }\n   }\n  "),variables:{id:c.wE.UniswapV2Pair.toLowerCase(),time:(0,h.Mv)()},fetchPolicy:"network-only"})}fetchDailyLPTokenStakedValue(){return this.client.query({query:(0,n.Ps)("\n    query($time:Int) \n    {\n        dailyLPStakings(where: {dayTimestamp_gt: $time},orderBy: dayTimestamp,orderDirection: desc)  {\n          id\n          dayTimestamp\n          stakedValue\n        }\n   }\n  "),variables:{id:c.wE.UniswapV2Pair.toLowerCase(),time:(0,h.Mv)()},fetchPolicy:"network-only"})}fetchMMFRewardDailyData(t){return this.client.query({query:(0,n.Ps)("\n    query($id: ID,$time:Int) {\n      pair(id:$id) {\n        id\n        mmfRewardDailyData(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          mmfReward\n        }\n     }\n   }\n  "),variables:{id:t.toLowerCase(),time:(0,h.Mv)()},fetchPolicy:"network-only"})}fetchTodayMMFRewardData(t){return this.client.query({query:(0,n.Ps)("\n    query($id: ID,$pairId:ID) {\n      mmfrewardDailyData(id:$id) {\n        id\n        dayStartTimestamp\n        mmfReward\n      }\n      pair(id:$pairId) {\n        id\n        fund0\n        fund1\n      }\n      pairDailyData(id:$id) {\n        id\n        mmfFund1\n      }\n   }\n  "),variables:{id:t.toLowerCase()+"-"+Number.parseInt((new Date).getTime()/864e5+""),pairId:t.toLowerCase()},fetchPolicy:"network-only"})}fetchMMFRewardHourDataIn24H(t){return this.client.query({query:(0,n.Ps)("\n    query($id: ID,$time: Int) {\n      pair(id:$id) {\n        id\n        mmfRewardHourData(where: {hourStartTimestamp_gt: $time},orderBy: hourStartTimestamp,orderDirection: desc)  {\n          id\n          hourStartTimestamp\n          mmfReward\n        }\n     }\n   }\n  "),variables:{id:t.toLowerCase(),time:Number.parseInt((new Date).getTime()/1e3-86400+"")},fetchPolicy:"network-only"})}fetchTiTiStakingDailyData(){return this.client.query({query:(0,n.Ps)("\n    query($time:Int) {\n      tiTiStakingEpochDailyDatas(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n        id\n        dayStartTimestamp\n        tvl\n        apy\n        epoch{\n          id\n        }\n      }\n   }\n  "),variables:{time:(0,h.Mv)()},fetchPolicy:"network-only"})}fetchEachEpochTotalReward(t){return this.client.query({query:(0,n.Ps)("\n    query($id: ID) {\n      tiTiStakingEpoches(where: {id_lt: $id}) {\n        tvl\n        totalReward\n     }\n   }\n  "),variables:{id:t},fetchPolicy:"network-only"})}fetchVaultFund(t){return this.client.query({query:(0,n.Ps)("\n    query($id: ID,$time:Int) {\n      fundVault(id:$id) {\n        id\n        address\n        dailyBalance(where: {dayStartTimestamp_gt: $time},orderBy: dayStartTimestamp,orderDirection: desc)  {\n          id\n          dayStartTimestamp\n          balance\n          token{\n            symbol\n            decimals\n          }\n        }\n     }\n   }\n  "),variables:{id:t,time:(0,h.Mv)()},fetchPolicy:"network-only"})}fetchLastReOrdersData(){return this.client.query({query:(0,n.Ps)("\n    query {\n      reOrders(first: 1, orderBy: lastReordersTime, orderDirection: desc) {\n        id\n        lastReordersTime\n        reordersCondition\n        pavAmount\n      }\n   }\n  "),variables:{},fetchPolicy:"network-only"})}fetchHistoricalMMFStakingEpoch(t){return this.client.query({query:(0,n.Ps)("\n    query ($epochNum:Int){\n      mmfstakingEpoches(where:{epochNum_lt:$epochNum}){\n        epochNum\n        startTimestamp\n        periodFinish\n        totalReward\n      }\n   }\n  "),variables:{epochNum:1*t},fetchPolicy:"network-only"})}fetchHistoricalLPStakingEpoch(t){return this.client.query({query:(0,n.Ps)("\n    query ($epochNum:Int){\n      lpstakingEpoches(where:{epochNum_lt:$epochNum}){\n        epochNum\n        startTimestamp\n        periodFinish\n        totalReward\n      }\n   }\n  "),variables:{epochNum:1*t},fetchPolicy:"network-only"})}fetchTiTiStakingUserRank(t,i){return this.client.query({query:(0,n.Ps)("\n    query($rank: Int,$blacklist: [String]) {\n      tiTiUserStakings(where:{id_not_in:$blacklist},orderBy: share, orderDirection: desc,first:$rank) {\n        id\n        share\n      }\n      tiTiStakings(first: 1){\n        totalAmount\n        totalShare\n      }\n   }\n  "),variables:{rank:t,blacklist:i},fetchPolicy:"network-only"})}fetchTiUSDCirculation(){const t=`\n    query {\n      tiUSD(id:"${c.wE.TiUSD.toLowerCase()}") {\n        id\n        tiusdCirculation\n      }\n   }\n  `;return this.client.query({query:(0,n.Ps)(t),variables:{},fetchPolicy:"network-only"})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=P.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},11730:(C,E,r)=>{r.d(E,{Uc:()=>i,fV:()=>m,wE:()=>B});var u=r(98538),T=r.n(u),n=r(52909),h=r(40520),c=r(5e3),P=r(5437),v=r(94602),a=r(57261),e=r(48966),t=r(31657);let i=(()=>{class w{constructor(s,y,d,p,o){this.web3ModalService=s,this.accountService=y,this._snackBar=d,this.dialog=p,this.refreshService=o,this.badge=0,this.recentTransaction=new Set(JSON.parse(localStorage.getItem("recentTransaction")||"[]"))}clearBadge(){this.badge=0}initWeb3(){return new Promise((s,y)=>{this.web3?(this.web3.currentProvider||this.web3.setProvider(this.web3ModalService.provider),s()):Promise.all([Promise.all([r.e(5540),r.e(4898),r.e(4445)]).then(r.t.bind(r,34445,23)),this.web3ModalService.getProvider()]).then(([d,p])=>{this.web3=new d.default(p),s()}).catch(y)})}getWeb3Instance(){return this.web3}setProvider(s){return this.initWeb3().then(()=>this.web3.setProvider(s))}invokeContract(s,y,d,p){return this.initWeb3().then(()=>Promise.all([this.getFunctionABI(s,y),this.accountService.getCurrentAccountAsyn()]).then(([o,g])=>{const f=this.web3.eth.abi.encodeFunctionCall(o,d),S={from:g,to:B[s],data:f,value:p};if("view"==o.stateMutability)return this.web3.eth.call(S).then(I=>this.web3.eth.abi.decodeParameters(o.outputs,I));{let I="";return this.web3.eth.sendTransaction(S).on("transactionHash",l=>{I=l;const D=Array.from(this.recentTransaction);D.unshift({txHash:l,contractName:s,functionName:y,params:d,receipt:null}),this.recentTransaction=new Set(D),localStorage.setItem("recentTransaction",JSON.stringify(D)),this.badge++}).on("receipt",l=>{this.recentTransaction.forEach(D=>{D.txHash===l.transactionHash&&(D.receipt=l)}),localStorage.setItem("recentTransaction",JSON.stringify(Array.from(this.recentTransaction))),l.status?(this.refreshService.invokeFunctions(),this._snackBar.open("Successful transaction!","close",{horizontalPosition:"center",verticalPosition:"top",duration:3e3})):this._snackBar.open("Transaction failed!","close",{horizontalPosition:"center",verticalPosition:"top",duration:3e3})}).on("error",l=>{var D,O;let b;if(this.recentTransaction.forEach(M=>{M.txHash===I&&(M.receipt={status:!1})}),l instanceof h.UA)b=l.error.data;else if("string"==typeof l)b=l;else if(l instanceof Error||"object"==typeof l){const M=(null===(O=null===(D=l.message)||void 0===D?void 0:D.split(": ").pop())||void 0===O?void 0:O.trim())||"Transaction failed!";b=M.length>120?M.substring(0,120)+"...":M}else b="Transaction failed!";localStorage.setItem("recentTransaction",JSON.stringify(Array.from(this.recentTransaction))),this._snackBar.open(b,"close",{horizontalPosition:"center",verticalPosition:"top",duration:3e3})}).then(l=>l)}})).catch(o=>{var g,f;let _;if(o instanceof h.UA)_=o.error.data;else if("string"==typeof o)_=o;else if(o instanceof Error||"object"==typeof o){const S=(null===(f=null===(g=o.message)||void 0===g?void 0:g.split(": ").pop())||void 0===f?void 0:f.trim())||"Unknown Error!";_=S.length>120?S.substring(0,120)+"...":S}else _="Unknown Error!";throw this._snackBar.open(_,"close",{horizontalPosition:"center",verticalPosition:"top",duration:3e3}),o})}getFunctionABI(s,y){return fetch(`/assets/abi/${s}.json`).then(d=>d.text()).then(d=>JSON.parse(d).abi).then(d=>{const p=d.filter(o=>o.name==y&&"function"==o.type);if(0===p.length)throw new Error("No such function");return p[0]})}decodeLog(s,y,d){return this.initWeb3().then(()=>this.web3.eth.abi.decodeLog(s,y,d))}openApproveModal(s,y,d,p){this.accountService.getCurrentAccountAsyn().then(o=>this.invokeContract(s,"allowance",[o,B[d]])).then(o=>{y.gt(n.O$.from(o[0]))?r.e(288).then(r.bind(r,30288)).then(({ApproveModalComponent:g})=>{const f=this.dialog.open(g);f.componentInstance.approveToken=s,f.componentInstance.approveValue=m.toString(),f.componentInstance.approveSpender=d,f.afterClosed().subscribe(p)}):p(!0)})}}return w.\u0275fac=function(s){return new(s||w)(c.LFG(P.y),c.LFG(v.B),c.LFG(a.ux),c.LFG(e.uw),c.LFG(t.g))},w.\u0275prov=c.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const m=new(T())("2").pow(new(T())("256")).sub(new(T())("1")),B={TiUSD:"0xdb2a1f5beF0F5F8614B04E9C408Fa8ea6cE4c01f",TiTiToken:"0xc4903796C6b7543fcFB3b6E0dB8463B385B53Aaf",USDC:"0xeC32468539b69C2eA791E3d37FE25D9F46BD3e5b",MAMMSwapPair:"0xd741e556D4239Da4de51B8adAD3713d746332cd9",MarketMakerFund:"0x0962Ad39E12b476CCB71c86f54606EA4488Fe582",MMFLPStakingPool:"0x55c8e46997eA3b08B231a860Ba99c05cF82A4843",LPStakingPool:"0xe10A51543E15c70fa4ccEe8dC4834Fa8db9e55C9",RainyDayFundVault:"0x6b7120EeE3D35CCC768A303223A7e8Df8632a21f",ProtocolFeeVault:"0x9213F5038e81c4F656046C59985ffC3910126c56",ReOrdersController:"0xE28bbCDa05cE55adAFb3ce73D4f333D1407c4154",TiTiStaking:"0xfAC4997e71EEE8aD8Da7055310fB7738aCeAbf41",UniswapV2Pair:"0x3B1878324F3584B66889Fd75cE78f17aE750b926",TiTiBackendV1:"0x259942C8bdadfDfeb4D6E3BF181aD07D84A8e1E1",TiTiMerkleDistributor:"0xc6aeD2a8CEF4Eb5FD38feab1Aca566962Cfe31Ed"}}}]);